<!DOCTYPE html>
<div style="margin-top: 100px;">
    <div class="col-lg-3" data-ng-init="detallesFacturaProducto()">
        <div class="panel" style="min-height: 500px; background-color: white;">
            <div class="panel-heading panel-warning" style="text-align: center; color: #8a6d3b">
                <label>Datos de la factura</label>
            </div>
            <div class="panel-body" ng-show="detalle">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-lg-5">Número: </label>
                        <div class="col-lg-7">{{detalle.numeroFactura}}</div>                                
                    </div>
                    <div class="form-group">
                        <label class="col-lg-5">Fecha: </label>
                        <div class="col-lg-7">{{detalle.fechaFactura}}</div>                                
                    </div>
                    <div class="form-group">
                        <label class="col-lg-5">Proveedor: </label>
                        <div class="col-lg-7">{{detalle.proveedor.nombreProveedor}}</div>                                
                    </div>
                    <div class="form-group">
                        <label class="col-lg-5">Monto: </label>
                        <div class="col-lg-7">{{detalle.monto|currency}}</div>                                
                    </div>
                    <div class="form-group">
                        <label class="col-lg-5">Estado: </label>
                        <div class="col-lg-7">{{detalle.estadoLocal}}</div>                                
                    </div>
                    <div class="form-group">
                        <label class="col-lg-5">Carga: </label>
                        <div class="col-lg-7" ng-show="detalle.carga">INICIADA</div>                                
                        <div class="col-lg-7" ng-hide="detalle.carga">FINALIZADA</div>                                
                    </div>
                    <div class="form-group" style="text-align: center;">
                        <label class="control-label">Observaciones</label>                        
                    </div>
                    <div class="form-group" style="text-align: center;">
                        <div>{{detalle.observaciones}}</div>
                        <div ng-hide="detalle.observaciones">NINGUNA</div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-lg-9">
        <uib-tabset justified="true" style="min-height: 500px; background-color: white;">
            <uib-tab heading="Productos de factura.">
                <div class="table-responsive"
                     ng-controller="ProductoController">
                    <table class="table table-bordered table-condensed"
                           ng-table="tableProductosFactura"
                           data-ng-init="listaProductosFactura()">
                        <thead id="headTableProductos">
                            <tr>
                                <th style="text-align: center">ID</th>
                                <th style="text-align: center">Descripcion</th> 
                                <th style="text-align: center">Cantidad</th> 
                                <th style="text-align: center">Talla</th> 
                                <th style="text-align: center">Color</th> 
                                <th style="text-align: center">Acciones</th> 
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="producto in $data| orderBy: 'cantidadTotal'"
                                ng-class="{ danger: stockMinimo(producto) }"                
                                >
                                <td style="text-align: center">{{producto.idProducto}}</td>
                                <td style="text-align: center"><a target="_blank" href="" ui-sref="^.producto-detalle({idProducto:{{producto.idProducto}}})">{{producto.descripcion}}</a></td>
                                <td style="text-align: center">{{producto.cantidadTotal}}</td>
                                <td style="text-align: center">{{producto.talla| uppercase}}</td>
                                <td style="text-align: center">{{producto.colorProducto| uppercase}}</td>                
                                <td style="text-align: center">
                                    <button class="btn btn-xs btn-danger"
                                            type="button"                            
                                            data-toggle="modal" data-target="#myModal"
                                            uib-tooltip="Remover producto."
                                            ng-click="seleccionarProducto(producto)"
                                            ><span class="glyphicon glyphicon-remove"></span></button>
                                </td>                
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <th id="btnAgregarProducto">
                                    <button class="btn btn-warning btn-sm" 
                                            type="button"
                                            uib-tooltip="Agregar nuevo producto"
                                            ng-click="agregarProductoFactura()">Agregar Producto</button>
                                </th>
                            </tr>
                            <tr>
                                <th id="btnAgregarProducto">
                                    <button class="btn btn-success btn-sm" 
                                            type="button"
                                            style="min-width: 118px;"
                                            ng-click="finalizarCargaFactura()"
                                            uib-tooltip="Finalizar carga">Finalizar</button>
                                </th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </uib-tab>
            <uib-tab heading="Modificar datos de la factura">
                <center>
                    <div style="margin-top: 100px; color: #8a6d3b; border: 2px solid #8a6d3b; box-shadow: 10px 10px 5px #888888; width: 300px;">
                        <h1>En desarrollo.</h1>
                        <h1><span class="glyphicon glyphicon-wrench"></span></h1>
                    </div>
                </center>
            </uib-tab>
        </uib-tabset>
    </div>
</div>

<!-- Modal eliminar producto-->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <center><h4 class="modal-title" id="myModalLabel">Eliminar producto</h4></center>
            </div>
            <div class="modal-body">
                <center>                        
                    ¿Desea eliminar este producto?                         
                    <br>
                    <button class="btn btn-danger"
                            style="margin-top: 20px;"
                            data-dismiss="modal"
                            ng-click="removerProducto()">Remover</button>
                </center>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>                    
            </div>
        </div>
    </div>
</div>